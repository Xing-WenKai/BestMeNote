<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>泰国身份证验证</title>
</head>

<body>
  <input type="text">
  <button>验证</button>

  <script>
    /*
      女朋友是产品经理，一次工作接触到了这个，不是很懂算法，就找到了我，于是便有了下面的代码

      泰国身份证号有效性校验
      方法：
      1.     身份证号共有13位数，用前12位分别乘以相应的系数（相应系数=13+1-身份证数所在的位数，如在第一位就减一，在第二位就减二），用所得的12个数字相加
      2.     第一条所得的和数除以11得到一个余数
      3.     用11减去第二条所得的余数，若得数与身份证号最后一位数字相等，则该身份证号视为有效（若余数是10，则取个位数0来校验）
      示例一： 身份证号为1-2345-67890-12-1
      1.     (1*13)+(2*12)+(3*11)+(4*10)+(5*9)+(6*8)+(7*7)+(8*6)+(9*5)+(0*4)+(1*3)+(2*2) = 352
      2.     除以11:  352/11=32 余数为0
      3.     用11减去第二条除以11后的余数: 11 – 0 = 11 (取个位数1来校验)
      4.     结果 : 1-2345-67890-12-1
      示例二：身份证号为1729900006919
      5.     (1*13)+(7*12)+(2*11)+(9*10)+(9*9)+(0*8)+(0*7)+(0*6)+(0*5)+(6*4)+(9*3)+(1*2) = 343
      6.     除以11:  343/11=31 余2
      7.     用11减去第二条除以11后的余数: 11 – 2 = 9 
      8.     结果 : 1-7299-00006-91-9
    */
    const userInput = document.querySelector('input')
    const btn = document.querySelector('button')
    btn.onclick = function () {
      // 把字符串切割放入数组
      const val = userInput.value.split('')
      checkId(val)
    }
    function checkId(arr) {
      // 第一步求和变量
      let sum = 0
      // 求出前12位与对应的系数相乘的和
      for (let i = 0; i < arr.length - 1; i++) {
        sum += arr[i] * (13 - i)
      }
      // 用和对11求余
      let remainder = sum % 11
      // 如果11减去余数后的个位 和 第13位相等，身份证校验成功
      if ((11 - remainder) % 10 === arr[arr.length - 1] * 1) {
        console.log('身份证号校验成功')
      } else {
        console.log('身份证号校验失败')
      }
    }
  </script>
</body>

</html>